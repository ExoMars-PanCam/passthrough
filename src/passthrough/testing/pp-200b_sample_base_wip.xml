<?xml version="1.0" encoding="UTF-8"?>

<?xml-model href="http://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1D00.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://pds.nasa.gov/pds4/geom/v1/PDS4_GEOM_1B10_1700.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://pds.nasa.gov/pds4/img/v1/PDS4_IMG_1B00_1610.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://pds.nasa.gov/pds4/disp/v1/PDS4_DISP_1B00.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://pds.nasa.gov/pds4/msn/v1/PDS4_MSN_1B00_1100.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://pds.nasa.gov/pds4/img_surface/v1/PDS4_IMG_SURFACE_1B10_1110.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://psa.esa.int/psa/v1/PDS4_PSA_1101.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://psa.esa.int/psa/emrsp/rm/v1/PDS4_PSA_EMRSP_RM_1D00_1100.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://psa.esa.int/psa/emrsp/rm/v1/PDS4_PSA_EMRSP_RM_PAN_1D00_1100.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>

<Product_Observational xmlns="http://pds.nasa.gov/pds4/pds/v1"
                       xmlns:emrsp_rm_pan="http://psa.esa.int/psa/emrsp/rm/pan/v1"
                       xmlns:emrsp_rm="http://psa.esa.int/psa/emrsp/rm/v1"
                       xmlns:disp="http://pds.nasa.gov/pds4/disp/v1"
                       xmlns:geom="http://pds.nasa.gov/pds4/geom/v1"
                       xmlns:img="http://pds.nasa.gov/pds4/img/v1"
                       xmlns:psa="http://psa.esa.int/psa/v1"
                       xmlns:msn="http://pds.nasa.gov/pds4/msn/v1"
                       xmlns:img_surface="http://pds.nasa.gov/pds4/img_surface/v1"
                       xmlns:pt="https://github.com/ExoMars-PanCam/passthrough"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                       xsi:schemaLocation="http://pds.nasa.gov/pds4/pds/v1 http://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1D00.xsd
                        http://pds.nasa.gov/pds4/disp/v1 http://pds.nasa.gov/pds4/disp/v1/PDS4_DISP_1B00.xsd
                        http://pds.nasa.gov/pds4/geom/v1 http://pds.nasa.gov/pds4/geom/v1/PDS4_GEOM_1B10_1700.xsd
                        http://pds.nasa.gov/pds4/img/v1 http://pds.nasa.gov/pds4/img/v1/PDS4_IMG_1B00_1610.xsd
                        http://psa.esa.int/psa/v1 https://psa.esa.int/psa/v1/PDS4_PSA_1101.xsd
                        http://psa.esa.int/psa/emrsp/rm/v1 https://psa.esa.int/psa/emrsp/rm/v1/PDS4_PSA_EMRSP_RM_1D00_1100.xsd
                        http://psa.esa.int/psa/emrsp/rm/pan/v1 https://psa.esa.int/psa/emrsp/rm/v1/PDS4_PSA_EMRSP_RM_PAN_1D00_1100.xsd
                        http://pds.nasa.gov/pds4/msn/v1 http://pds.nasa.gov/pds4/msn/v1/PDS4_MSN_1B00_1100.xsd
                        http://pds.nasa.gov/pds4/img_surface/v1 http://pds.nasa.gov/pds4/img_surface/v1/PDS4_IMG_SURFACE_1B10_1110.xsd"> <!-- TODO: versions correct for msn & img_surface? -->
    <!--
    TODO:
      - RVSW 3.1 required conditionals for the classes that are affected
      - W/O FS regarding processing context entries

    -->
    <Identification_Area pt:fetch="true()" pt:sources="primary">
        <logical_identifier/>
        <version_id/>
        <title/> <!-- PAN_TM_*_ANCIL_SIID_PC -->
        <information_model_version/>
        <product_class/>
        <Modification_History>
            <Modification_Detail>
                <modification_date/>
                <version_id/>
                <description/>
            </Modification_Detail>
        </Modification_History>
    </Identification_Area>

    <Observation_Area pt:fetch="true()" pt:sources="primary">
        <comment/>
        <Time_Coordinates>
            <start_date_time/> <!-- PAN_TM_WAC_ANCIL_ITS || PAN_TM_HRC_ANCIL_PTS -->
            <stop_date_time pt:fetch="false()" pt:sources="template" pt:defer="true()"
                            pt:fill="pt:datetime_inc(//pds:Time_Coordinates/pds:start_date_time, //img:Exposure/img:exposure_duration)" /> <!-- PAN-PROC-20 -->
        </Time_Coordinates>
        <Primary_Result_Summary>
            <purpose/> <!-- PAN_TM_*_ANCIL_SIID_TID via CAL-300 -->
            <processing_level/>
            <description/>  <!-- PAN_TM_*_ANCIL_SIID_PC -->
            <Science_Facets> <!-- static -->
                <discipline_name/>
            </Science_Facets>
        </Primary_Result_Summary>

        <Investigation_Area> <!-- static -->
            <name/>
            <type/>
            <Internal_Reference>
                <lid_reference/>
                <reference_type/>
            </Internal_Reference>
        </Investigation_Area>

        <Observing_System> <!-- static -->
            <name/>
            <Observing_System_Component>
                <name/>
                <type/>
                <description/>
                <Internal_Reference>
                    <lid_reference/>
                    <reference_type/>
                </Internal_Reference>
            </Observing_System_Component>
            <Observing_System_Component>
                <name/>
                <type/>
                <description/>
                <Internal_Reference>
                    <lid_reference/>
                    <reference_type/>
                </Internal_Reference>
            </Observing_System_Component>
        </Observing_System>

        <Target_Identification> <!-- static - unless this is where PCT/CCT links go as well; revisit -->
            <name/>
            <type/>
            <description/>
            <Internal_Reference>
                <lid_reference/>
                <reference_type/>
            </Internal_Reference>
        </Target_Identification>

        <Mission_Area>
            <emrsp_rm:Activity>
                <emrsp_rm:activity_name/>
                <emrsp_rm:activity_session/>
            </emrsp_rm:Activity>

            <psa:Mission_Information>
                <psa:spacecraft_clock_start_count/> <!-- FIXME: needed? And if so, what is the origin? -->
                <psa:spacecraft_clock_stop_count/> <!-- as above -->
                <psa:mission_phase_name/>
                <psa:mission_phase_identifier/>
            </psa:Mission_Information>

            <psa:Sub-Instrument>
                <psa:identifier/> <!-- PAN_TM_*_ANCIL_SIID_PC -->
                <psa:name/> <!-- PAN_TM_*_ANCIL_SIID_PC -->
                <psa:type/> <!-- static -->
            </psa:Sub-Instrument>

            <emrsp_rm:Mission>
                <emrsp_rm:mars_sol pt:required="false()"/>
                <emrsp_rm:Experiment_Cycle pt:required="false()">
                    <emrsp_rm:ec_number/>
                    <emrsp_rm:ec_phase/>
                </emrsp_rm:Experiment_Cycle>
                <emrsp_rm:local_true_solar_time_start/>
                <emrsp_rm:local_true_solar_time_stop/>  <!-- FIXME: LTST and LMST, calc stop time from cal exposure time-->
                <emrsp_rm:local_mean_solar_time_start/>
                <emrsp_rm:local_mean_solar_time_stop/>
                <emrsp_rm:mms_sl_version/>
                <emrsp_rm:mms_il_version/>
                <emrsp_rm:rvsw_version/>
            </emrsp_rm:Mission>

            <emrsp_rm:Mission_Product>
                <emrsp_rm:status/>
                <emrsp_rm:operational_vid pt:fill="string(pt:self() + 1)"/>  <!-- string to ensure int result and not default float -->
                <!--FIXME: waiting on word from FS on how we'll be dealing with Processing_Context -->
                <emrsp_rm:Processing_Context>
                    <emrsp_rm:processing_software_title/> <!-- TODO: after tm2raw sample split, set to proto:proc_name (and below to proto:proc_version) -->
                    <emrsp_rm:processing_software_version/>
                    <emrsp_rm:Processing_Inputs>
                        <emrsp_rm:Processing_Input_Identification> <!-- proto:multi -->
                            <emrsp_rm:type/>
                            <!--AL NOTE: for PP-220 etc., want to add the below Operational_Reference instead of file_name -->
                            <!--<emrsp_rm:Operational_Reference>-->
                            <!--<lid_reference>$Processing_Input_Identification.Operational_Reference.lid_reference</lid_reference>-->
                            <!--<emrsp_rm:operational_vid>$Processing_Input_Identification.Operational_Reference.operational_vid</emrsp_rm:operational_vid>-->
                            <!--</emrsp_rm:Operational_Reference>-->
                            <emrsp_rm:file_name/>
                            <!-- Raw products are generated from the file downlinked through PUS Service 13.
                            The file name is the readable translation of the File ID used on-board, followed by the downlink UTC time reference:
                                    <Data Source>_<Data Types>_<Counter>_<Downlink_UTC_date_time>
                            where:
                            - Data_Source is the 3-chars instrument acronym
                            - Data Types should be equal to one of the following values: {HK_NOT_ESSENTIAL, HK_ESSENTIAL, SCI_NOT_CRITICAL, SCI_CRITICAL}
                            - Counter: unique counter to identify which of the 512 files allowed by the file system is the one referred
                            - Downlink_UTC_date_time: downlink UTC time reference (format TBC)
                            -->
                        </emrsp_rm:Processing_Input_Identification>
                    </emrsp_rm:Processing_Inputs>
                </emrsp_rm:Processing_Context>
            </emrsp_rm:Mission_Product>
        </Mission_Area>

        <Discipline_Area>
            <msn:Mission_Information>
                <!-- TODO: TL/PSA indicates we might instead use psa:observation_type (presumably from future release as it's not in psa V1200). Reevaluate at a later point -->
                <msn:product_type_name/> <!-- static per product type - if template shared w/cal-obs then replace w/conditional statement -->
            </msn:Mission_Information>

            <geom:Geometry>
                <geom:SPICE_Kernel_Files> <!-- Deferred until delivery TODO JR: check implications for our processors -->
                    <geom:SPICE_Kernel_Identification>
                        <geom:spice_kernel_file_name/>
                        <Internal_Reference>
                            <lidvid_reference/>
                            <reference_type/>
                        </Internal_Reference>
                    </geom:SPICE_Kernel_Identification>
                </geom:SPICE_Kernel_Files>
                <geom:Geometry_Lander>
                    <!--<geom:Camera_Model_Parameters>-->
                        <!-- This class will include information about camera model for products from imagers.
                        A camera model describes the mathematical relationship between the coordinates of a point in 3-dimensional space and its projection
                        onto a 2-dimensional image plane. There are numerous types of camera models, only two of which are currently implemented.
                        TODO JR: "To be completed by PanCam"
                        -->
                    <!--</geom:Camera_Model_Parameters>-->
                    <geom:Articulation_Device_Parameters>
                        <geom:device_name/>
                        <geom:Device_Angle>
                            <geom:Device_Angle_Index pt:multi="2">
                                <geom:index_name/>
                                <geom:index_value_angle/>
                            </geom:Device_Angle_Index>
                        </geom:Device_Angle>
                    </geom:Articulation_Device_Parameters>
                    <geom:Coordinate_Space_Definition>
                        <!-- TBC if present coordinate space is sensor coordinate space -->
                        <!-- TBC if reference coordinate space is Landing Site -->
                        <local_identifier/>
                        <geom:Coordinate_Space_Present>
                            <!-- This class identifies the sensor coordinate space in SPICE -->
                            <geom:Coordinate_Space_SPICE>
                                <!-- RM_PANCAM_WAC_L, RM_PANCAM_WAC_R, RM_PANCAM_HRC according to PAN_TM_*_ANCIL_SIID_PC -->
                                <geom:body_spice_name/>
                                <geom:frame_spice_name/>
                            </geom:Coordinate_Space_SPICE>
                        </geom:Coordinate_Space_Present>
                        <geom:Vector_Origin_Offset> <!--Deferred until delivery TODO JR: check implications for our processors -->
                            <!-- This class contains the vector which describes the translation of the sensor coordinate space with respect to Landing site.
                                 Will be left empty in ROCC and will be filled before delivery. Deferred until delivery (unless a rover fixed reference coordinate space is chosen) -->
                            <geom:x_position/>
                            <geom:y_position/>
                            <geom:z_position/>
                        </geom:Vector_Origin_Offset>
                        <geom:Quaternion_Plus_Direction> <!--Deferred until delivery TODO JR: check implications for our processors -->
                            <!-- provides the four elements of a quaternion and its direction of rotation. Describes the rotation of the sensor coordinate space
                                 with respect to Landing Site. Deferred until delivery (unless a rover fixed reference coordinate space is chosen) -->
                            <geom:qcos/>
                            <geom:qsin1/>
                            <geom:qsin2/>
                            <geom:qsin3/>
                            <geom:rotation_direction/>
                        </geom:Quaternion_Plus_Direction>
                        <geom:Coordinate_Space_Reference>
                            <geom:Coordinate_Space_SPICE>
                                <!-- This class will provide a link to the SPICE coordinate space (reference frame + body) to Landing Site -->
                                <geom:body_spice_name/>
                                <geom:frame_spice_name/>
                            </geom:Coordinate_Space_SPICE>
                        </geom:Coordinate_Space_Reference>
                    </geom:Coordinate_Space_Definition>
                    <!--<geom:Derived_Geometry> &lt;!&ndash;Deferred until delivery &ndash;&gt; &lt;!&ndash; optional &ndash;&gt;-->
                        <!--&lt;!&ndash; Here all the geometrical information deemed relevant for a specific product.&ndash;&gt;-->
                        <!--&lt;!&ndash; TODO JR: TBD by PPL instrument team &ndash;&gt;-->
                    <!--</geom:Derived_Geometry>-->
                    <geom:Motion_Counter>
                        <geom:name/>
                        <local_identifier/>
                        <geom:Motion_Counter_Index pt:multi="12">
                            <geom:index_id/>
                            <geom:index_value_number/>
                        </geom:Motion_Counter_Index>
                    </geom:Motion_Counter>
                </geom:Geometry_Lander>
            </geom:Geometry>

            <disp:Display_Settings>
                <Local_Internal_Reference>
                    <local_identifier_reference/>
                    <local_reference_type/>
                </Local_Internal_Reference>
                <disp:Display_Direction>
                    <disp:horizontal_display_axis/>
                    <disp:horizontal_display_direction/>
                    <disp:vertical_display_axis/>
                    <disp:vertical_display_direction/>
                </disp:Display_Direction>
            </disp:Display_Settings>

            <img:Imaging>
                <Local_Internal_Reference>
                    <local_identifier_reference/>
                    <local_reference_type/>
                </Local_Internal_Reference>

                <img:Color_Filter_Array pt:required="//psa:Sub-Instrument/psa:identifier = 'HRC'">
                    <img:color_filter_array_state/> <!-- NOTE: PP-230 set to Decoded and add Data_Processing/processing_algorithm attribute -->
                    <img:color_filter_array_type/> <!-- TODO: when TM2RAW flips the HRC array the effective pattern becomes GRBR -->
                </img:Color_Filter_Array>

                <img:Detector>
                    <img:detector_to_image_rotation/>  <!-- PAN_TM_*_ANCIL_SIID_PC - WACL: 90, WACR: -90, HRC: 0-->
                    <img:gain_number/> <!--PAN_TM_WAC_ANCIL_GAS || PAN_TM_HRC_ANCIL_GA -->
                </img:Detector>

                <img:Downsampling> <!-- NOTE: TM2RAW responsibility, but pending RVSW v3.1 expanded image header - PAN_TM_WAC_ANCIL_BIN is not used to evaluate this --> <!-- proto:optional (condition: RVSW < 3.1 or not indicated by header) -->
                    <img:processing_venue/> <!-- SUBSAMPLE_MODE -->
                    <img:processing_algorithm/> <!-- SUBSAMPLE_MODE -->
                    <img:Pixel_Averaging_Dimensions>
                        <img:height_pixels/> <!-- SUBSAMPLE_SUPER_PIXEL_SIZE -->
                        <img:width_pixels/> <!-- SUBSAMPLE_SUPER_PIXEL_SIZE -->
                    </img:Pixel_Averaging_Dimensions>
                </img:Downsampling>

                <img:Exposure>
                    <img:exposure_duration_count/> <!-- PAN_TM_*_ANCIL_IT -->
                    <img:exposure_duration unit="s" pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                    <img:exposure_type pt:required="//psa:Sub-Instrument/psa:identifier != 'HRC'"/> <!-- PAN_TM_WAC_ANCIL_AE --> <!-- TODO: resolve why ALTEC used DT when they wrote the original comment "if PAN_TM_WAC_DT_AE == 0b0: Manual, if PAN_TM_WAC_DT_AE == 0b1: Automatic" -->
                </img:Exposure>

                <img:Onboard_Compression> <!-- origin: TM compression header -->
                    <img:onboard_compression_class/>
                    <img:onboard_compression_rate/> <!-- NOTE: bits per pixel of compressed image, inferred from ratio-->
                    <img:onboard_compression_ratio/>
                    <!--<img:onboard_compression_type>CCSDS 122.0-B-1</img:onboard_compression_type> &lt;!&ndash; add if future img DD supports our algorithm &ndash;&gt;-->
                </img:Onboard_Compression>

                <img:Optical_Filter pt:required="//psa:Sub-Instrument/psa:identifier != 'HRC'">
                    <img:filter_number/> <!-- PAN_TM_WAC_ANCIL_SIID_FW -->
                    <img:filter_name pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                    <img:filter_id pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                    <img:bandwidth unit="nm" pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                    <img:center_filter_wavelength unit="nm" pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                </img:Optical_Filter>

                <img:Sampling> <!-- NOTE: TM2RAW responsibility, but pending RVSW v3.1 expanded image header -->
                    <!--<img:original_sample_bits>10</img:original_sample_bits> &lt;!&ndash; To be added if we move to a newer img LDD &ndash;&gt;-->
                    <img:sample_bits/> <!-- SUBSAMPLE_MODE -->
                    <img:Companding>
                        <img:processing_venue/>
                        <img:processing_algorithm/> <!-- SUBSAMPLE_MODE -->
                        <img:companding_state/> <!-- SUBSAMPLE_MODE -->
                    </img:Companding>
                </img:Sampling>

                <img:Subframe> <!-- NOTE: TM2RAW responsibility, but pending RVSW v3.1 expanded image header --> <!-- proto:optional (condition: RVSW < 3.1 or not indicated by header) -->
                    <img:first_line/> <!-- SUBFRAME_CORRECTED_COORDY -->
                    <img:first_sample/> <!-- SUBFRAME_CORRECTED_COORDX -->
                    <img:lines/> <!-- SUBFRAME_ROWS -->
                    <img:samples/> <!-- SUBFRAME_COLS -->
                    <!-- TODO JR: consider if GeomCorr should add line_fov and sample_fov attributes to PP-221 & PP-231 -->
                </img:Subframe>

                <img:Instrument_State>
                    <img:Device_Temperatures>
                        <img:Device_Temperature>
                            <img:device_id/> <!-- PAN_TM_*_ANCIL_SIID_PC -->
                            <img:device_name/> <!-- PAN_TM_*_ANCIL_SID_PC -->
                            <img:raw_count/> <!-- PAN_TM_WAC_ANCIL_STP || PAN_TM_HRC_ANCIL_TP -->
                            <img:temperature_value unit="degC" pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                        </img:Device_Temperature>
                    </img:Device_Temperatures>
                </img:Instrument_State>

                <img:Focus pt:required="//psa:Sub-Instrument/psa:identifier = 'HRC'">
                    <img:focus_position/> <!-- PAN_TM_HRC_ANCIL_ENC -->
                    <img:best_focus_position unit="m" pt:fetch="false()"/> <!-- PAN-PROC-20 -->
                </img:Focus>
            </img:Imaging>

            <img_surface:Surface_Imaging>
                <img_surface:Instrument_Information>
                    <img_surface:instrument_version_number/> <!-- TM2RAW -->
                </img_surface:Instrument_Information>

                <img_surface:Image_Identifiers>
                    <img_surface:image_id/> <!-- App. A -->
                    <img_surface:mesh_id pt:required="false()"/> <!-- App. A -->
                    <img_surface:mosaic_id pt:required="false()"/> <!-- App. A -->
                </img_surface:Image_Identifiers>
            </img_surface:Surface_Imaging>

            <emrsp_rm_pan:Acquisition_Identification>
                <emrsp_rm_pan:sol_id/> <!-- PAN_TM_*_ANCIL_SIID_SOL -->
                <emrsp_rm_pan:acquisition_type_id/> <!-- PAN_TM_*_ANCIL_SIID_TID -->
                <emrsp_rm_pan:acquisition_type_name/> <!-- PAN_TM_*_ANCIL_SIID_TID via CAL-300 -->
                <emrsp_rm_pan:acquisition_type_description/> <!-- PAN_TM_*_ANCIL_SIID_TID via CAL-300 -->
                <emrsp_rm_pan:acquisition_sequence_number/> <!-- PAN_TM_*_ANCIL_SIID_TRN -->
                <emrsp_rm_pan:acquisition_sequence_image_number/> <!-- PAN_TM_*_ANCIL_SIID_IN -->
            </emrsp_rm_pan:Acquisition_Identification>

            <emrsp_rm_pan:HRC_Ancillary_Data pt:required="//psa:Sub-Instrument/psa:identifier = 'HRC'">
                <emrsp_rm_pan:HRC_Autoexposure>
                    <emrsp_rm_pan:desired_pixel_number/> <!-- PAN_TM_HRC_ANCIL_DPN -->
                    <emrsp_rm_pan:auto_exposure_tolerance/> <!-- PAN_TM_HRC_ANCIL_TOL -->
                    <emrsp_rm_pan:auto_exposure_success_flag/> <!-- ~PAN_TM_HRC_ANCIL_ERAI -->
                    <emrsp_rm_pan:min_exposure_duration/> <!-- PAN_TM_HRC_ANCIL_MII -->
                    <emrsp_rm_pan:max_exposure_duration/> <!-- PAN_TM_HRC_ANCIL_MAI -->
                </emrsp_rm_pan:HRC_Autoexposure>
                <emrsp_rm_pan:HRC_Focus>
                    <emrsp_rm_pan:Focus_Window>
                        <emrsp_rm_pan:x/> <!-- PAN_TM_HRC_ANCIL_FXC -->
                        <emrsp_rm_pan:y/> <!-- PAN_TM_HRC_ANCIL_FYC -->
                        <emrsp_rm_pan:size/> <!-- PAN_TM_HRC_ANCIL_FWZ -->
                    </emrsp_rm_pan:Focus_Window>
                    <emrsp_rm_pan:sharpness/> <!-- PAN_TM_HRC_ANCIL_CS -->
                    <emrsp_rm_pan:auto_focus_error_flag/> <!-- PAN_TM_HRC_ANCIL_ERAF -->
                    <emrsp_rm_pan:actuator_error_flag/> <!-- PAN_TM_HRC_ANCIL_ERENC -->
                </emrsp_rm_pan:HRC_Focus>
            </emrsp_rm_pan:HRC_Ancillary_Data>

            <emrsp_rm_pan:WAC_Ancillary_Data pt:required="//psa:Sub-Instrument/psa:identifier != 'HRC'">
                <emrsp_rm_pan:auto_exposure_success_flag/> <!-- PAN_TM_WAC_ANCIL_ASEF -->
            </emrsp_rm_pan:WAC_Ancillary_Data>

            <emrsp_rm_pan:Tactical_Estimates pt:fetch="false()" pt:required="false()">
                <emrsp_rm_pan:ISEM_Footprint> <!-- PAN-PROC-20 -->
                    <emrsp_rm_pan:x/>
                    <emrsp_rm_pan:y/>
                    <emrsp_rm_pan:radius/>
                </emrsp_rm_pan:ISEM_Footprint>
            </emrsp_rm_pan:Tactical_Estimates>

        </Discipline_Area>
    </Observation_Area>

    <Reference_List pt:fetch="true()" pt:sources="primary">
        <Internal_Reference pt:multi="true()">
            <lid_reference/>
            <reference_type/>
        </Internal_Reference>
    </Reference_List>

    <File_Area_Observational pt:fetch="true()" pt:sources="primary">
        <File>
            <file_name/>
            <local_identifier/>
            <creation_date_time/>
            <file_size/>
            <md5_checksum/>
            <comment/>
        </File>

        <Table_Binary>
            <local_identifier/>
            <offset/>
            <records/>
            <Record_Binary>
                <fields/>
                <groups/>
                <record_length/>
                <Field_Binary pt:multi="true()">
                    <name/>
                    <field_location/>
                    <data_type/>
                    <field_length/>
                    <description/>
                </Field_Binary>
            </Record_Binary>
        </Table_Binary>

        <Array_2D_Image>
            <local_identifier/>
            <offset/>
            <axes/>
            <axis_index_order/>
            <Element_Array>
                <data_type/>
                <value_offset/>
            </Element_Array>
            <Axis_Array pt:multi="2">
                <axis_name/>
                <elements/>
                <sequence_number/>
            </Axis_Array>
        </Array_2D_Image>
    </File_Area_Observational>
</Product_Observational>
